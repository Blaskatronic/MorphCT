#### CI CONFIG

language: python

python:
  - "3.5"

integrations:
  notifications:
    - integrationName: hipchat-integration-morphct
      type: hipchat
      recipients:
        - "#3712501"

branches:
  only:
    - master
    - dev

env:
  global:
    - TRAVIS=False
    - secure: AGvHyk+sj7iFpXOj+mpRMbyiSmBxC3mPndWCGCwfQlhamEwo4xPmw51RH5Z3Z5NSqKlwsLfqFpjygyjttvfRI97Qb+4n4cCPIhozl0/dqhkIPT9PuY2A2+d/i63C73s9jJi1NJVS2gbXeA7BQjh7W7NWYTQt+UBuCpRg0ndssm/u0NLpMIjDW4PWcSS31wXCaXBZQwZVdGCLsY2V4HeCWMZgOZiCkUWo8JtQ7BNTnoTY9VPiD4TLA5e5r/h+5C2J0ur5rC5uk2FuimXZG2hTIbsOXtsn2vEP3wxISqB/9u8prUtBZt6jsRZfj+TyG5/ssgURGL9GmK8E5ASf8KDuaA==

build:
  cache: true
  cache_dir_list:
    - /opt/conda/envs/morphct/
  pre_ci_boot:
    image_name: cmelab/orca
    image_tag: 0.0.2
    pull: true
  ci:
    - echo $CODECOV_TOKEN
    - source conda_cache_check.bash
    - pip install -e .
    - PYTEST_ADDOPTS="-c pytest-shippable.ini" pytest tests/test_helper_functions.py
  on_success:
    - echo $COMMIT
    - export COMMIT="$(git rev-parse HEAD)"
    - echo $COMMIT
    - echo $CODECOV_TOKEN
      #- curl -s https://codecov.io/bash | bash -s - -t $CODECOV_TOKEN || echo "Codecov upload failed, coverage reports not updated!"
    - bash <(curl -s https://codecov.io/bash) -t $CODECOV_TOKEN || echo "Codecov upload failed, coverage reports not updated!"
